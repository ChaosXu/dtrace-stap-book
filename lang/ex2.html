<html>
<head>
	<meta charset="utf-8" /> 
	<meta http-equiv="Content-Type" content="text/html">
	<meta name="generator" content="TSDoc 0.2">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<title>Module 2: Dynamic tracing languages</title>
	
	<link rel="stylesheet" href="../bootstrap/css/bootstrap.css" />
	<link href="../bootstrap/css/bootstrap-responsive.css" rel="stylesheet" media="screen,handheld"/>
	
	<script type="text/javascript">
	function toggleCode(id) {
		code = document.getElementById(id);
		hideClass = 'hide';
		
		if(code.classList.contains(hideClass))
			code.classList.remove(hideClass);
		else
			code.classList.add(hideClass);
	}
	</script>
	
	<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-71659121-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>

<!-- HEADER -->

<div class="navbar">
    <div class="navbar-inner">
	    <div class="container">
			<a class="brand" href="../index.html">Dynamic Tracing with DTrace & SystemTap</a><ul class="nav pull-left">
<li><a href="tapset.html"><strong>Prev</strong>(Tapsets & translators)</a></li>
</ul>
		</div>
    </div>
</div>

<div class="container max-height no-overflow">
	<div id="content" nevow:render="content">
		<p>
<h3>Exercise 2</h3></p>
<p>
Modify scripts from Exercise 1 so they count following statistics for processes that are running in a system:<br />     <ul>
        <li>
 number of attempts to open existing file;<br /> </li>
        <li>
 number of attempts to create a file;<br /> </li>
        <li>
 number of successful attempts.<br /> </li>
</ul>
</p>
<p>
At a period that is defined as command line arguments (specified in seconds) script should print:<br />     <ul>
        <li>
 Current time and day in human-readable format.<br /> </li>
        <li>
 Table that contains gathered statistics per process along with that process name and PID.<br />Numbers should be cleared during each iteration. <br /></li>
</ul>
</p>
<p>
You can use module <code>file_opener</code> to demonstrate your scripts. This module uses working directory which is passed as <code>root_dir</code> parameter, fills it with some files that are created preliminary (their number is set by <code>created_files</code> parameter). While executing request, it uses <code>file</code> random variable (which range is cut to <code>[1;max_files)</code>) and either tries to create a file or open it depending on <code>create</code> parameter. <br /></p>
<p>
Run several experiments using TSLoad workload generator varying <code>created_files</code> parameter and compare the results:<br /></p>
<p>
<pre>
# EXPDIR=/opt/tsload/var/tsload/file_opener
# for I in 1 2 3; do
    mkdir /tmp/fopen$I
    tsexperiment -e $EXPDIR run                             \
            -s workloads:open:params:root_dir=/tmp/fopen$I  \
            -s workloads:open:params:created_files=$((I * 160)) &
done
</pre>
</p>
<p>
Try to explain differences you get from the nature of <code>file_opener</code> workload generator module. </p>

	</div>
</div>

<!-- TAIL -->

<div class="navbar navbar-bottom">
    <div class="navbar-inner">
        <div class="container">
            <ul class="nav pull-left">
<li><a href="tapset.html"><strong>Prev</strong>(Tapsets & translators)</a></li>
</ul>
<ul class="nav pull-center">
<li><a href="../index.html"><strong>Up</strong>(Dynamic Tracing with DTrace & SystemTap)</a></li>
</ul>
        </div>
    </div>
</div>

<ul class="breadcrumb">
    <li><a href="https://github.com/myaut/dtrace-stap-book"><small>GitHub</small></a> <span class="divider">|</span></li>
    <li><a href="https://bitbucket.org/sergey_klyaus/dtrace-stap-book"><small>BitBucket</small></a> <span class="divider">|</span></li>
    <li style="float: right; ">
        <small>
        Published under terms of <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/">CC-BY-NC-SA 3.0</a> license.
        </small>
    </li>
</ul>
</body>
</html>